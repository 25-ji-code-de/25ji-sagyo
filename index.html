<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" id="viewportMeta" content="width=device-width, initial-scale=1">
  <title>『25时、Nightcord见。』成员们的 24 小时工作日常</title>
  <meta name="description" content="『25时、Nightcord见。』成员们的 24 小时工作日常 — 沉浸式作业陪伴：番茄钟、CD 播放器、世界时钟与音频可视化等实用工具。" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <div id="videoLoader" class="video-loader">
      <div class="loader-spinner"></div>
      <div class="loader-text">视频加载中...</div>
    </div>
    <video id="video" autoplay muted playsinline preload="metadata" crossorigin="anonymous"></video>
      <div id="overlay">
        <div id="info">
          Time (<span id="tzLabel">Local</span>): <span id="localTime">--:--:--</span>
        </div>

        <!-- Live Status & Broadcast Widget -->
        <div id="liveStatus" class="live-status-container">
          <div class="live-stat-item online-users" title="当前在线人数">
            <span class="live-dot"></span>
            <span class="stat-value">--</span>
            <span class="stat-label">在线</span>
          </div>
          <div class="live-stat-item broadcast-msg" data-i18n-title="broadcast.click_to_view">
            <span class="broadcast-icon">📢</span>
            <div class="broadcast-text-wrapper">
              <span class="broadcast-text" data-i18n="broadcast.connecting">正在连接 Nightcord...</span>
            </div>
          </div>
        </div>

        <div id="controls" role="toolbar" aria-label="Video controls">
          <button id="muteBtn" aria-pressed="true" title="Mute / Unmute">🔊</button>
          <input id="volumeSlider" type="range" min="0" max="1" step="0.05" value="1" aria-label="Volume" />
          <button id="audioProcessBtn" aria-pressed="false" title="音频处理（限幅+降低人声）">🎚️</button>
          <button id="fullscreenBtn" title="Fullscreen">Fullscreen</button>
          <button id="tzToggleBtn" title="Toggle timezone">Toggle TZ</button>
          <button id="pomodoroBtn" title="Pomodoro Timer">🍅</button>
          <button id="cdPlayerBtn" title="CD Player">💿</button>
          <button id="todoListBtn" title="Todo List">📋</button>
          <button id="breathingBtn" title="呼吸练习" data-i18n-title="breathing.title">🌬️</button>
          <button id="settingsBtn" title="设置">⚙️</button>
        </div>

        <!-- Pomodoro Timer Panel -->
        <div id="pomodoroPanel" class="hidden">
          <div class="pomodoro-header">
            <span data-i18n="pomodoro.title">番茄钟 & 世界时钟</span>
            <div class="header-controls">
              <button id="toggleClockWidget" class="toggle-btn" data-i18n-title="world_clock.toggle_hint" title="显示/隐藏时钟">🕐</button>
              <button id="pomodoroCloseBtn" class="close-btn" title="关闭">✕</button>
            </div>
          </div>

          <!-- Main Content: Left-Right Layout -->
          <div class="pomodoro-main-content">
            <!-- Left Side: World Clock Section -->
            <div class="world-clock-section" id="worldClockSection">
              <div class="clock-item main-clock">
                <div class="clock-label" data-i18n="world_clock.local_time">本地时间</div>
                <div class="clock-time-large">
                  <span class="time-hours" id="localHours">00</span>
                  <span class="time-separator">:</span>
                  <span class="time-minutes" id="localMinutes">00</span>
                  <span class="time-separator">:</span>
                  <span class="time-seconds" id="localSeconds">00</span>
                  <span class="time-milliseconds" id="localMilliseconds">.000</span>
                </div>
                <div class="clock-date" id="localDate">2025年12月7日 星期六</div>
              </div>
              
              <div class="world-clocks-grid">
                <div class="clock-item-small">
                  <select class="clock-select" id="clock1Select" title="选择时区"></select>
                  <div class="clock-time-small" id="clock1Container">
                    <span class="time-hms" id="clock1Time">00:00:00</span>
                  </div>
                </div>
                <div class="clock-item-small">
                  <select class="clock-select" id="clock2Select" title="选择时区"></select>
                  <div class="clock-time-small" id="clock2Container">
                    <span class="time-hms" id="clock2Time">00:00:00</span>
                  </div>
                </div>
                <div class="clock-item-small">
                  <select class="clock-select" id="clock3Select" title="选择时区"></select>
                  <div class="clock-time-small" id="clock3Container">
                    <span class="time-hms" id="clock3Time">00:00:00</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Right Side: Pomodoro Timer -->
            <div class="pomodoro-body">
              <div id="pomodoroDisplay" class="pomodoro-display">25:00</div>
              <div class="pomodoro-status" data-i18n="pomodoro.status.ready">准备工作</div>
              <div class="pomodoro-controls">
                <button id="pomodoroStartBtn" class="pomodoro-btn primary" data-i18n="pomodoro.buttons.start">开始</button>
                <button id="pomodoroPauseBtn" class="pomodoro-btn" data-i18n="pomodoro.buttons.pause" disabled>暂停</button>
                <button id="pomodoroResetBtn" class="pomodoro-btn" data-i18n="pomodoro.buttons.reset">重置</button>
              </div>

              <!-- Active Task Indicator (from Todo List) -->
              <div id="activeTaskIndicator" class="active-task-indicator">
                <div class="active-task-top-row">
                  <span class="active-task-label-icon">🎯</span>
                  <span class="active-task-name-text" id="activeTaskName" data-i18n="todo.no_active_task">未选择任务</span>
                  <button class="active-task-close-btn" id="clearActiveTaskBtn" data-i18n-title="todo.clear_active_task" title="取消关联">✕</button>
                </div>
                
                <div class="active-task-bottom-row">
                   <div class="active-task-pomo-track" id="activeTaskPomoTrack">
                      <!-- Rendered by JS -->
                   </div>
                   <div class="active-task-int-btns">
                      <button class="int-btn internal" id="quickIntInternal" data-i18n-title="todo.interruption_internal" title="内部干扰">'</button>
                      <button class="int-btn external" id="quickIntExternal" data-i18n-title="todo.interruption_external" title="外部干扰">-</button>
                   </div>
                </div>
              </div>
              <div class="pomodoro-settings">
                <div class="setting-item">
                  <label for="workDuration" data-i18n="pomodoro.settings.work_duration">工作时长 (分钟):</label>
                  <input type="number" id="workDuration" min="1" max="60" value="25" />
                </div>
                <div class="setting-item">
                  <label for="shortBreak" data-i18n="pomodoro.settings.short_break">短休息 (分钟):</label>
                  <input type="number" id="shortBreak" min="1" max="30" value="5" />
                </div>
                <div class="setting-item">
                  <label for="longBreak" data-i18n="pomodoro.settings.long_break">长休息 (分钟):</label>
                  <input type="number" id="longBreak" min="1" max="60" value="15" />
                </div>
                <div class="setting-item">
                  <label for="pomodoroRound" data-i18n="pomodoro.settings.round">工作轮次:</label>
                  <span id="pomodoroRound">0 / 4</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Chat Panel -->
      <div id="chatPanel" class="hidden side-panel">
        <div class="panel-header">
          <span>💬 消息记录</span>
          <button id="chatCloseBtn" class="close-btn" title="关闭">✕</button>
        </div>
        <div class="chat-messages" id="chatMessages">
          <div class="chat-message system">
            <span class="time">--:--</span>
            <span class="content">欢迎来到 Nightcord 作业空间。</span>
          </div>
        </div>
        <div class="chat-input-area">
          <input type="text" id="chatInput" data-i18n-placeholder="broadcast.send_placeholder" placeholder="发送消息..." />
          <button id="chatSendBtn">发送</button>
        </div>
      </div>

      <!-- CD Player Panel -->
      <div id="cdPlayerPanel" class="hidden">
        <div class="cd-player-header">
          <span data-i18n="cd_player.title">🎵 SEKAI 留声机</span>
          <div class="header-controls">
            <button id="toggleVisualization" class="toggle-btn" data-i18n-title="cd_player.toggle_visualization" title="显示/隐藏音频可视化">🌀</button>
            <button id="cdPlayerCloseBtn" class="close-btn" title="关闭">✕</button>
          </div>
        </div>

        <div class="cd-player-body">
          <!-- Music List -->
          <div class="music-list-section">
            <!-- Category Sidebar -->
            <div class="music-categories" id="musicCategories">
              <button class="category-btn active" data-category="all" data-i18n-title="cd_player.categories.all" title="全部歌曲">🎵</button>
              <button class="category-btn" data-category="favorites" data-i18n-title="cd_player.categories.favorites" title="我喜欢的音乐">⭐</button>
              <button class="category-btn" data-category="playlists" data-i18n-title="cd_player.categories.playlists" title="我的歌单">📂</button>
              <button class="category-btn" data-category="local" data-i18n-title="cd_player.categories.local" title="本地音乐">📥</button>
              <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 4px 8px;"></div>
              <button class="category-btn" data-category="special" data-i18n-title="cd_player.categories.special" title="STUDY系列">📚</button>
              <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 4px 8px;"></div>
              <button class="category-btn" data-category="virtual_singer" title="Virtual Singer">
                <img src="/unit_logos/vs.webp" alt="VS" />
              </button>
              <button class="category-btn" data-category="leo_need" title="Leo/need">
                <img src="/unit_logos/ln.webp" alt="L/n" />
              </button>
              <button class="category-btn" data-category="more_more_jump" title="MORE MORE JUMP!">
                <img src="/unit_logos/mmj.webp" alt="MMJ" />
              </button>
              <button class="category-btn" data-category="vivid_bad_squad" title="Vivid BAD SQUAD">
                <img src="/unit_logos/vbs.webp" alt="VBS" />
              </button>
              <button class="category-btn" data-category="wonderlands_x_showtime" title="Wonderlands×Showtime">
                <img src="/unit_logos/ws.webp" alt="WxS" />
              </button>
              <button class="category-btn" data-category="25_ji_nightcord_de" title="25时，在Nightcord。">
                <img src="/unit_logos/25ji.webp" alt="25时" />
              </button>
              <button class="category-btn" data-category="other" title="其他">📀</button>
            </div>

            <div class="music-list-container">
              <div class="music-search">
                <input type="text" id="musicSearchInput" data-i18n-placeholder="cd_player.search_placeholder" placeholder="搜索歌曲..." />
              </div>
              <div class="music-list" id="musicList">
                <div class="loading" data-i18n="cd_player.loading">加载中...</div>
              </div>
            </div>
          </div>

          <!-- Now Playing -->
          <div class="now-playing-section">
            <div class="album-cover-container">
              <canvas id="visualizerCanvas" width="400" height="400"></canvas>
              <img id="albumCover" src="https://assets.nightcord.de5.net/mysekai/music_record_soundtrack/jacket/jacket_s_soundtrack_1.webp" alt="Album Cover" class="album-cover" crossorigin="anonymous" />
              <div class="cd-animation" id="cdAnimation"></div>
              <div id="trackLoadingSpinner" class="track-loading-spinner hidden">
                <div class="spinner-icon"></div>
              </div>
            </div>

            <div class="track-info">
              <div class="track-title" id="trackTitle" data-i18n="cd_player.no_track">选择一首歌曲</div>
              <div class="track-artist" id="trackArtist" data-i18n="cd_player.no_artist">-</div>
              <div class="track-vocal" id="trackVocal">-</div>
            </div>

            <!-- Audio Player Controls -->
            <div class="player-progress">
              <span class="time-current" id="currentTime">0:00</span>
              <input type="range" id="progressBar" min="0" max="100" value="0" step="0.1" />
              <span class="time-total" id="totalTime">0:00</span>
            </div>

            <div class="player-controls">
              <button id="prevBtn" class="control-btn" data-i18n-title="cd_player.controls.prev" title="上一首">⏮</button>
              <button id="playPauseBtn" class="control-btn play-btn" data-i18n-title="cd_player.controls.play" title="播放/暂停">▶️</button>
              <button id="nextBtn" class="control-btn" data-i18n-title="cd_player.controls.next" title="下一首">⏭</button>
              <button id="shuffleBtn" class="control-btn" data-i18n-title="cd_player.controls.shuffle" title="随机播放">🔀</button>
              <button id="repeatBtn" class="control-btn" data-i18n-title="cd_player.controls.repeat" title="循环播放">🔁</button>
            </div>

            <div class="volume-control">
              <span>🔊</span>
              <input type="range" id="cdVolumeSlider" min="0" max="0.5" step="0.01" value="0.1" />
            </div>
          </div>
        </div>

        <!-- Hidden Audio Element -->
        <audio id="cdAudioPlayer" preload="metadata"></audio>
      </div>

      <!-- Todo List Panel -->
      <div id="todoPanel" class="hidden side-panel">
        <div class="panel-header">
          <span data-i18n="todo.title">📋 待办事项</span>
          <div class="header-controls">
            <button id="todoCloseBtn" class="close-btn" title="关闭">✕</button>
          </div>
        </div>
        
        <div class="todo-body">
          <div class="todo-scroll-area">
            <!-- Today's Plan -->
            <div class="todo-section today-section">
              <div class="section-header-v2">
                <span class="section-icon">🍅</span>
                <span class="section-title-v2" data-i18n="todo.section_today">Today's Focus</span>
                <span class="section-count" id="todayCount">0</span>
              </div>
              
              <!-- Quick Add to Today -->
              <div class="todo-input-area v2-input">
                 <input type="text" id="newTodoInputToday" data-i18n-placeholder="todo.input_placeholder_today" placeholder="Add to Today..." autocomplete="off"/>
                 <button id="addTodoBtnToday" class="todo-btn primary" data-i18n-title="todo.add_button_title" title="添加任务">➕</button>
              </div>

              <div class="todo-list-container today-list-container">
                 <ul id="todoListToday" class="todo-items-v2">
                    <!-- Items will be injected here -->
                 </ul>
              </div>
            </div>

            <div class="section-divider"></div>

            <!-- Activity Inventory -->
            <div class="todo-section inventory-section">
              <div class="section-header-v2">
                <span class="section-icon">📥</span>
                <span class="section-title-v2" data-i18n="todo.section_inventory">Inbox</span>
              </div>
              <div class="todo-input-area v2-input">
                 <input type="text" id="newTodoInputInbox" data-i18n-placeholder="todo.input_placeholder_inbox" placeholder="Add to Inbox..." autocomplete="off"/>
                 <button id="addTodoBtnInbox" class="todo-btn secondary" data-i18n-title="todo.add_button_title" title="添加任务">➕</button>
              </div>
              <div class="todo-list-container inventory-list-container">
                 <ul id="todoListInventory" class="todo-items-v2">
                    <li class="todo-item-placeholder" style="text-align:center; opacity: 0.5; padding: 20px; font-size: 13px;">
                        <span style="display:block; font-size: 24px; margin-bottom: 8px;">✨</span>
                        <span data-i18n="todo.empty_inbox">Collect your ideas here</span>
                    </li>
                 </ul>
              </div>
            </div>
          </div>
          
          <div class="todo-footer">
             <span class="todo-stats">0 items left</span>
             <button id="clearCompletedBtn" class="text-btn" data-i18n="todo.clear_completed">清除已完成</button>
          </div>
        </div>
      </div>

      <!-- Breathing Exercise Panel -->
      <div id="breathingPanel" class="hidden">
        <div class="breathing-header">
          <span data-i18n="breathing.title">呼吸练习</span>
          <div class="header-controls">
            <button id="breathingCloseBtn" class="close-btn" title="关闭">✕</button>
          </div>
        </div>

        <div class="breathing-content">
          <div class="breathing-circle-container">
            <!-- Text is now inside circle to scale with it -->
            <div id="breathingCircle" class="breathing-circle">
               <div id="breathingCircleText" class="breathing-circle-text"></div>
            </div>
            <div class="breathing-guide-ring"></div>
          </div>
          
          <div class="breathing-controls-area">
            <div class="breathing-instruction" id="breathingInstruction" data-i18n="breathing.instructions.ready">点击开始</div>
             <div class="breathing-mode-description-container">
                 <div class="breathing-mode-rhythm" id="breathingModeRhythm" data-i18n="breathing.descriptions.sleep">吸气 4s · 屏息 7s · 呼气 8s</div>
                 <div class="breathing-mode-detail" id="breathingModeDetail" data-i18n="breathing.details.sleep">通过长时间呼气激活副交感神经，帮助身体深度放松，适合睡前使用。</div>
             </div>

            <div class="breathing-modes">
              <button class="breathing-mode-btn active" data-mode="sleep" data-i18n="breathing.modes.sleep">4-7-8 助眠呼吸</button>
              <button class="breathing-mode-btn" data-mode="box" data-i18n="breathing.modes.box">箱式呼吸 (专注)</button>
              <button class="breathing-mode-btn" data-mode="resonance" data-i18n="breathing.modes.resonance">共振呼吸 (心流)</button>
            </div>

            <div class="breathing-main-btn">
              <button id="breathingStartBtn" class="breathing-action-btn" data-i18n="breathing.buttons.start">开始</button>
              <button id="breathingStopBtn" class="breathing-action-btn stop hidden" data-i18n="breathing.buttons.stop">结束</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Panel (Expanded) -->
      <div id="settingsPanel" class="hidden expanded-panel">
        <div class="settings-header">
          <span data-i18n="settings.title">控制中心</span>
          <div class="header-controls">
            <button id="settingsCloseBtn" class="close-btn" title="关闭">✕</button>
          </div>
        </div>
        <div class="settings-body-layout">
          <!-- Sidebar -->
          <div class="settings-sidebar">
            <button class="sidebar-btn active" data-tab="home">
              <span class="icon">🏠</span> <span class="label" data-i18n="settings.sidebar.home">首页</span>
            </button>
            <button class="sidebar-btn" data-tab="settings">
              <span class="icon">⚙️</span> <span class="label" data-i18n="settings.sidebar.settings">设置</span>
            </button>
            <button class="sidebar-btn" data-tab="sync">
              <span class="icon">☁️</span> <span class="label" data-i18n="settings.sidebar.sync">数据同步</span>
            </button>
            <button class="sidebar-btn" data-tab="stats">
              <span class="icon">📊</span> <span class="label" data-i18n="settings.sidebar.stats">专注统计</span>
            </button>
            <button class="sidebar-btn" data-tab="achievements">
              <span class="icon">🏆</span> <span class="label" data-i18n="settings.sidebar.achievements">成就系统</span>
            </button>
            <button class="sidebar-btn" data-tab="about">
              <span class="icon">ℹ️</span> <span class="label" data-i18n="settings.sidebar.about">关于</span>
            </button>
          </div>

          <!-- Content Area -->
          <div class="settings-content">
            <!-- Home Tab -->
            <div class="tab-content active" id="tab-home">
              <div class="home-welcome-section">
                <h2 id="greetingText">晚上好，</h2>
                <div class="user-nickname-container">
                  <span id="userNickname" class="nickname-text">「世界」的居民</span>
                  <button id="editNicknameBtn" class="icon-btn" data-i18n-title="settings.home.edit_nickname" title="修改昵称">✏️</button>
                </div>
              </div>

              <div class="home-stats-summary">
                <div class="summary-card">
                  <div class="summary-icon">🔥</div>
                  <div class="summary-text" id="streakSummary">你已与 25时 共同度过了 1 天的时光</div>
                </div>
                <div class="summary-card">
                  <div class="summary-icon">⏳</div>
                  <div class="summary-text" id="timeSummary">累计专注 0 小时，继续加油！</div>
                </div>
              </div>

              <div class="home-tips-card">
                <div class="tips-header">
                  <span class="tips-icon">💡</span>
                  <span data-i18n="settings.home.tips_title">每日贴士</span>
                </div>
                <p id="randomTipText" class="tips-content">休息也是工作的一部分哦。</p>
              </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-content" id="tab-settings">
              <div class="settings-section">
                <h3 data-i18n="settings.language.title">语言 / Language</h3>
                <div class="setting-item">
                  <div class="setting-label">
                    <span data-i18n="settings.language.label">界面语言</span>
                    <span class="setting-desc" data-i18n="settings.language.desc">选择您偏好的语言</span>
                  </div>
                  <select id="languageSelect" class="setting-select">
                    <option value="zh-CN">简体中文</option>
                    <option value="zh-TW">繁體中文</option>
                    <option value="en-US">English</option>
                    <option value="ja-JP">日本語</option>
                  </select>
                </div>
              </div>

              <div class="settings-section">
                <h3 data-i18n="settings.health.title">健康提醒</h3>
                <div class="setting-item">
                  <div class="setting-label">
                    <span data-i18n="settings.health.sedentary.label">久坐提醒</span>
                    <span class="setting-desc" data-i18n="settings.health.sedentary.desc">定时提醒起来活动一下</span>
                  </div>
                  <label class="switch">
                    <input type="checkbox" id="sedentaryEnabled" checked>
                    <span class="slider round"></span>
                  </label>
                </div>
                <div class="setting-item" id="sedentaryIntervalContainer">
                  <div class="setting-label">
                    <span data-i18n="settings.health.sedentary.interval">提醒间隔 (分钟)</span>
                  </div>
                  <input type="number" id="sedentaryInterval" class="setting-input" min="15" max="180" step="5" value="60">
                </div>

                <div class="setting-item">
                  <div class="setting-label">
                    <span data-i18n="settings.health.hydration.label">喝水提醒</span>
                    <span class="setting-desc" data-i18n="settings.health.hydration.desc">定时提醒补充水分</span>
                  </div>
                  <label class="switch">
                    <input type="checkbox" id="hydrationEnabled" checked>
                    <span class="slider round"></span>
                  </label>
                </div>
                <div class="setting-item" id="hydrationIntervalContainer">
                  <div class="setting-label">
                    <span data-i18n="settings.health.hydration.interval">提醒间隔 (分钟)</span>
                  </div>
                  <input type="number" id="hydrationInterval" class="setting-input" min="15" max="180" step="5" value="45">
                </div>
              </div>
            </div>

            <!-- Sync Tab -->
            <div class="tab-content" id="tab-sync">
              <div class="empty-state">
                <div class="empty-icon">☁️</div>
                <h3 data-i18n="settings.sync.title">云端同步</h3>
                <p data-i18n="settings.sync.desc">登录以同步您的专注时长、成就和偏好设置。</p>
                <button class="primary-btn" data-i18n="settings.sync.login_btn">登录 / 注册</button>
              </div>
            </div>

            <!-- Stats Tab -->
            <div class="tab-content" id="tab-stats">
              <div class="stats-grid">
                <div class="stat-card">
                  <div class="stat-value">0</div>
                  <div class="stat-label" data-i18n="settings.stats.today_focus">今日专注 (分钟)</div>
                </div>
                <div class="stat-card">
                  <div class="stat-value">0</div>
                  <div class="stat-label" data-i18n="settings.stats.total_focus">累计专注 (小时)</div>
                </div>
                <div class="stat-card">
                  <div class="stat-value">0</div>
                  <div class="stat-label" data-i18n="settings.stats.pomodoro_count">完成番茄钟</div>
                </div>
              </div>
              <div class="settings-section">
                <h3 data-i18n="settings.stats.recent_activity">近期活动</h3>
                <div class="activity-list">
                  <div class="activity-item" data-i18n="settings.stats.no_activity">暂无记录</div>
                </div>
              </div>
            </div>

            <!-- Achievements Tab -->
            <div class="tab-content" id="tab-achievements">
              <div class="achievements-list"></div>
            </div>

            <!-- About Tab -->
            <div class="tab-content" id="tab-about">
              <div class="about-header">
                <div class="about-logo"><svg width="48" height="48" viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M13,10.69v2.72H10.23V10.69Zm3,0v2.69h2.69V10.72ZM23.29,12A11.31,11.31,0,1,1,12,.67,11.31,11.31,0,0,1,23.29,12Zm-.18.07a8.87,8.87,0,1,0-8.87,8.86A8.87,8.87,0,0,0,23.11,12.05Z"
                    fill="white"></path>
                </svg></div>
                <h3 data-i18n="app.title">『25时、Nightcord见。』成员们的 24 小时工作日常</h3>
                <p class="version" id="appVersion">Loading...</p>
              </div>
              <div class="settings-section">
                <p class="about-desc" data-i18n="settings.about.description">
                  沉浸式作业陪伴工具，提供番茄钟、CD 播放器、世界时钟与音频可视化等实用功能。
                </p>
                <div class="links-row">
                  <a href="https://github.com/bili-47177171806/25ji-sagyo" class="link-btn" target="_blank">GitHub</a>
                  <a href="https://space.bilibili.com/3546904856103196" class="link-btn" target="_blank">Bilibili</a>
                  <a href="https://afdian.com/a/1806P" class="link-btn" target="_blank">爱发电</a>
                  <a href="https://github.com/bili-47177171806/25ji-sagyo/issues/new" class="link-btn" target="_blank">反馈问题</a>
                </div>
              </div>
              <div class="settings-section">
                <div class="section-title" data-i18n="settings.about.legal_title">📜 法律条款</div>
                <div class="legal-links-row">
                  <a href="https://docs.nightcord.de5.net/legal/complete/terms-25ji" target="_blank" class="legal-link-btn" data-i18n="settings.about.terms">用户协议</a>
                  <a href="https://docs.nightcord.de5.net/legal/complete/privacy-25ji" target="_blank" class="legal-link-btn" data-i18n="settings.about.privacy">隐私政策</a>
                  <a href="./docs.html?file=COPYRIGHT.md" target="_blank" class="legal-link-btn" data-i18n="settings.about.copyright">版权声明</a>
                  <a href="./docs.html?file=LICENSE" target="_blank" class="legal-link-btn" data-i18n="settings.about.license">开源许可</a>
                </div>
              </div>
              <div class="settings-section">
                <div class="legal-text">
                  <p><strong data-i18n="settings.about.disclaimer_title">免责声明 / Disclaimer</strong></p>
                  <p>本项目（25ji-sagyo）为非官方粉丝作品（Fan Art），与 SEGA、Colorful Palette 或 Crypton Future Media 无任何关联。</p>
                  <p>本项目中使用的所有游戏素材（包括但不限于视频、音频、图像、角色设计、剧本等）的版权均归 <strong>© SEGA</strong>、<strong>© Colorful Palette Inc.</strong> 及 <strong>© Crypton Future Media, INC.</strong> 所有。</p>
                  <p>本项目仅供学习、研究及个人欣赏使用，<strong>严禁用于任何形式的商业用途或营利活动</strong>。开发者不对因使用本项目而产生的任何直接或间接损失承担责任。</p>
                  <p>如权利方认为本项目侵犯了您的权益，请联系开发者，我们将立即采取措施进行处理。</p>
                  <p style="margin-top: 12px; font-size: 0.85em; opacity: 0.8;">使用本网站即表示您已阅读并同意上述条款。</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Orientation Warning -->
      <div id="orientation-warning">
        <div class="warning-content">
          <div class="phone-icon">📱</div>
          <p>为了更好的体验，请使用横屏浏览</p>
        </div>
      </div>
  </div>

  <script>
  // Default sources - replace or override with query params ?p1=...&p2=...&p3=...
  const DEFAULT_SOURCES = {
    // p1: 'https://REDACTED/sagyo/p01.mp4',
    // p2: 'https://REDACTED/sagyo/p02.mp4',
    // p3: 'https://REDACTED/sagyo/p03.mp4',
    // p4: 'https://REDACTED/sagyo/p04.mp4',
    // p5: 'https://REDACTED/sagyo/p05.mp4',
    // p6: 'https://REDACTED/sagyo/p06.mp4',
    m3u8: 'https://assets.nightcord.de5.net/sagyo/index.m3u8'
  };

  function parseSourcesFromURL() {
    const url = new URL(window.location.href);
    const s = { ...DEFAULT_SOURCES };
    ['p1','p2','p3'].forEach(k => {
      if (url.searchParams.get(k)) s[k] = url.searchParams.get(k);
    });
    return s;
  }

  // make sources globally available to script.js
  window.TIME_SYNC_SOURCES = parseSourcesFromURL();
  </script>

  <!-- 工具模块 -->
  <script src="js/utils/helpers.js"></script>
  <script src="js/utils/i18n.js"></script>
  <script src="js/utils/storage.js"></script>
  <script src="js/utils/asset-loader.js"></script>
  
  <!-- 数据模块 -->
  <script src="js/data/broadcast-messages.js"></script>
  
  <!-- 功能模块 -->
  <script src="js/features/achievements.js"></script>
  <script src="js/features/live-status.js"></script>
  
  <!-- 组件模块 -->
  <script src="js/components/pomodoro.js"></script>
  <script src="js/components/world-clock.js"></script>
  <script src="js/components/health-reminder.js"></script>
  <script src="js/components/settings-panel.js"></script>
  <script src="js/components/todo-list.js"></script>
  <script src="js/components/breathing.js"></script>
  
  <!-- CD 播放器模块 -->
  <script type="module" src="js/cd-player/index.js"></script>
  
  <!-- 核心模块 -->
  <script src="js/core/video-settings.js"></script>
  <script src="js/core/time-sync.js"></script>
  <script src="js/core/hls-handler.js"></script>
  <script src="js/core/audio-processor.js"></script>
  <script src="js/core/player-controls.js"></script>
  <script src="js/core/video-player.js"></script>
</body>
</html>
